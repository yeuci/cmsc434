<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Kitchen App</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <!-- main container -->
    <div class="container">
      <!-- current page  -->
      <div class="current-page">
        <!-- INVENTORY PAGE -->
        <div class="inventory--page page active-page">
          <header class="page-header">
            <h1 id="inventoryHeader">Refrigerator</h1>
            <div class="header-actions">
              <label for="sortSelect" class="sort-label">Sort by:</label>
              <select id="sortSelect" class="sort-select">
                <option value="expiry">Expiry Date</option>
                <option value="added">Date Added</option>
                <option value="name">Name (A-Z)</option>
              </select>
              <button class="btn primary" id="openAddModalBtn">+ Add</button>
            </div>
          </header>

          <div class="inventory-wrap">
            <div id="itemCount" class="item-count"></div>
            <ul id="ingredientList" class="ingredient-list" aria-live="polite"></ul>
            <div id="emptyState" class="empty-state">
              Your fridge is empty... for now. Click <strong>Add</strong> to stock it up!
            </div>
          </div>

          <footer class="legend">
            <span class="dot dot-fresh"></span> Fresh
            <span class="dot dot-soon"></span> Expires soon
            <span class="dot dot-expired"></span> Expired
          </footer>
        </div>

        <!-- SHOPPING LISTS PAGE -->
        <div class="shopping-lists--page page">
          <header class="page-header">
            <h1>Shopping Lists</h1>
            <div class="header-actions">
              <button id="addShoppingListBtn" class="btn primary">+ New List</button>
            </div>
          </header>

          <!-- LISTS INDEX VIEW -->
          <div id="shoppingListsView" class="inventory-wrap">
            <div id="shoppingListsCount" class="item-count"></div>
            <ul id="shoppingLists" class="ingredient-list" aria-live="polite"></ul>
            <div id="shoppingListsEmpty" class="empty-state">
              No shopping lists yet. Click <strong>+ New List</strong> to start one!
            </div>
          </div>

          <!-- SINGLE LIST VIEW -->
          <div id="shoppingItemsView" class="inventory-wrap" style="display: none">
            <div class="header-actions" style="justify-content: flex-start; gap: 0.8rem; margin-bottom: 0.4rem;">
              <button id="backToListsBtn" class="btn">← Back</button>
              <button id="renameListBtn" class="btn">Rename</button>
              <button id="deleteListBtn" class="btn danger">Delete List</button>
              <button id="addShoppingItemBtn" class="btn primary" style="margin-left: auto">+ Add Item</button>
            </div>
            <h2 id="shoppingListTitle" class="item-name" style="margin-bottom: 0.4rem"></h2>
            <div id="shoppingItemsCount" class="item-count"></div>
            <ul id="shoppingItems" class="ingredient-list" aria-live="polite"></ul>
            <div id="shoppingItemsEmpty" class="empty-state">No items yet. Add your first one!</div>
          </div>
        </div>

        <!-- Recipes PAGE -->
        <div class="recipes--page page">
          <header class="page-header">
            <h1>Recipes</h1>
          </header>
        </div>

        <!-- SETTINGS PAGE -->
        <div class="settings--page page">
          <header class="page-header">
            <h1>Settings</h1>
          </header>

          <form id="settingsForm" class="form settings-form">
            <label>
              Display name
              <input type="text" id="userNameInput" placeholder="Your name" />
            </label>

            <label>
              Cooking level
              <select id="cookingLevelSelect">
                <option value="beginner">Beginner</option>
                <option value="intermediate">Intermediate</option>
                <option value="advanced">Advanced</option>
              </select>
            </label>

            <label class="row">
              <input type="checkbox" id="themeToggle" />
              <span>Light mode</span>
            </label>

            <label class="row">
              <input type="checkbox" id="autoDeleteExpiredToggle" />
              <span>Automatically delete expired items</span>
            </label>

            <p class="settings-hint">
              When enabled, items that are past their expiry date will be removed automatically when you open or refresh the app.
            </p>

            <!-- NEW: adjustable "Expires soon" threshold -->
            <label>
              "Expires soon" threshold (days)
              <input
                type="number"
                id="soonDaysInput"
                min="0"
                max="30"
                step="1"
                placeholder="2"
              />
            </label>
            <p class="settings-hint">
              Items with 0 up to this many days remaining are marked “Expires Soon”.
            </p>

            <div class="settings-actions">
              <button type="submit" class="btn primary">Save</button>
              <button type="button" class="btn" id="resetSettings">Reset</button>
            </div>
          </form>
        </div>
      </div>

      <!-- bottom navigation -->
      <div class="navigation">
        <div class="nav nav-1" role="button" tabindex="0" aria-label="Inventory">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640">
            <path d="M32 206.1L32 544C32 561.7 46.3 576 64 576C81.7 576 96 561.7 96 544L96 304C96 286.3 110.3 272 128 272L512 272C529.7 272 544 286.3 544 304L544 544C544 561.7 558.3 576 576 576C593.7 576 608 561.7 608 544L608 206.1C608 178.6 590.4 154.1 564.2 145.4L335.2 69.1C325.3 65.8 314.7 65.8 304.8 69.1L75.8 145.4C49.6 154.1 32 178.6 32 206.1zM496 320L144 320L144 384L496 384L496 320zM144 480L496 480L496 416L144 416L144 480zM496 512L144 512L144 576L496 576L496 512z"/>
          </svg>
          <span>Inventory</span>
        </div>

        <div class="nav nav-2" role="button" tabindex="0" aria-label="Shopping Lists">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640">
            <path d="M439.4 96L448 96C483.3 96 512 124.7 512 160L512 512C512 547.3 483.3 576 448 576L192 576C156.7 576 128 547.3 128 512L128 160C128 124.7 156.7 96 192 96L200.6 96C211.6 76.9 232.3 64 256 64L384 64C407.7 64 428.4 76.9 439.4 96zM376 176C389.3 176 400 165.3 400 152C400 138.7 389.3 128 376 128L264 128C250.7 128 240 138.7 240 152C240 165.3 250.7 176 264 176L376 176zM256 320C256 302.3 241.7 288 224 288C206.3 288 192 302.3 192 320C192 337.7 206.3 352 224 352C241.7 352 256 337.7 256 320zM288 320C288 333.3 298.7 344 312 344L424 344C437.3 344 448 333.3 448 320C448 306.7 437.3 296 424 296L312 296C298.7 296 288 306.7 288 320zM288 448C288 461.3 298.7 472 312 472L424 472C437.3 472 448 461.3 448 448C448 434.7 437.3 424 424 424L312 424C298.7 424 288 434.7 288 448zM224 480C241.7 480 256 465.7 256 448C256 430.3 241.7 416 224 416C206.3 416 192 430.3 192 448C192 465.7 206.3 480 224 480z"/>
          </svg>
          <span>Shopping Lists</span>
        </div>

        <div class="nav nav-3" role="button" tabindex="0" aria-label="Recipes">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640">
            <path d="M127.9 78.4C127.1 70.2 120.2 64 112 64C103.8 64 96.9 70.2 96 78.3L81.9 213.7C80.6 219.7 80 225.8 80 231.9C80 277.8 115.1 315.5 160 319.6L160 544C160 561.7 174.3 576 192 576C209.7 576 224 561.7 224 544L224 319.6C268.9 315.5 304 277.8 304 231.9C304 225.8 303.4 219.7 302.1 213.7L287.9 78.3C287.1 70.2 280.2 64 272 64C263.8 64 256.9 70.2 256.1 78.4L242.5 213.9C241.9 219.6 237.1 224 231.4 224C225.6 224 220.8 219.6 220.2 213.8L207.9 78.6C207.2 70.3 200.3 64 192 64C183.7 64 176.8 70.3 176.1 78.6L163.8 213.8C163.3 219.6 158.4 224 152.6 224C146.8 224 142 219.6 141.5 213.9L127.9 78.4zM512 64C496 64 384 96 384 240L384 352C384 387.3 412.7 416 448 416L480 416L480 544C480 561.7 494.3 576 512 576C529.7 576 544 561.7 544 544L544 96C544 78.3 529.7 64 512 64z"/>
          </svg>
          <span>Recipes</span>
        </div>

        <div class="nav nav-4" role="button" tabindex="0" aria-label="Settings">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640">
            <path d="M259.1 73.5C262.1 58.7 275.2 48 290.4 48L350.2 48C365.4 48 378.5 58.7 381.5 73.5L396 143.5C410.1 149.5 423.3 157.2 435.3 166.3L503.1 143.8C517.5 139 533.3 145 540.9 158.2L570.8 210C578.4 223.2 575.7 239.8 564.3 249.9L511 297.3C511.9 304.7 512.3 312.3 512.3 320C512.3 327.7 511.8 335.3 511 342.7L564.4 390.2C575.8 400.3 578.4 417 570.9 430.1L541 481.9C533.4 495 517.6 501.1 503.2 496.3L435.4 473.8C423.3 482.9 410.1 490.5 396.1 496.6L381.7 566.5C378.6 581.4 365.5 592 350.4 592L290.6 592C275.4 592 262.3 581.3 259.3 566.5L244.9 496.6C230.8 490.6 217.7 482.9 205.6 473.8L137.5 496.3C123.1 501.1 107.3 495.1 99.7 481.9L69.8 430.1C62.2 416.9 64.9 400.3 76.3 390.2L129.7 342.7C128.8 335.3 128.4 327.7 128.4 320C128.4 312.3 128.9 304.7 129.7 297.3L76.3 249.8C64.9 239.7 62.3 223 69.8 209.9L99.7 158.1C107.3 144.9 123.1 138.9 137.5 143.7L205.3 166.2C217.4 157.1 230.6 149.5 244.6 143.4L259.1 73.5zM320.3 400C364.5 399.8 400.2 363.9 400 319.7C399.8 275.5 363.9 239.8 319.7 240C275.5 240.2 239.8 276.1 240 320.3C240.2 364.5 276.1 400.2 320.3 400z"/>
          </svg>
          <span>Settings</span>
        </div>
      </div>
    </div>

    <!-- ADD INGREDIENT MODAL -->
    <div class="modal-backdrop" id="addModal" data-open="false" aria-hidden="true">
      <div class="modal" role="dialog" aria-labelledby="addModalTitle" aria-modal="true">
        <h2 id="addModalTitle">Add Ingredient</h2>
        <form id="addIngredientForm" class="form">
          <label>
            Name
            <input type="text" id="ingName" name="name" placeholder="e.g., Milk" required />
          </label>

          <label>
            Quantity
            <input
              type="number"
              id="ingQty"
              name="quantity"
              min="1"
              step="1"
              inputmode="numeric"
              placeholder="1"
              required
            />
          </label>

          <label>
            Expiry date
            <input type="date" id="ingExpiry" name="expiry" required />
          </label>
          <div class="modal-actions">
            <button type="button" class="btn" data-close-modal>Cancel</button>
            <button type="submit" class="btn primary">Add</button>
          </div>
        </form>
      </div>
    </div>

    <!-- DELETE CONFIRM MODAL -->
    <div class="modal-backdrop" id="deleteModal" data-open="false" aria-hidden="true">
      <div class="modal" role="dialog" aria-labelledby="deleteModalTitle" aria-modal="true">
        <h2 id="deleteModalTitle">Remove Ingredient</h2>
        <p id="deletePrompt">Are you sure you want to remove this item?</p>
        <div class="modal-actions">
          <button type="button" class="btn" data-close-modal>Cancel</button>
          <button type="button" class="btn danger" id="confirmDeleteBtn">Delete</button>
        </div>
      </div>
    </div>

    <!-- ADD SHOPPING LIST MODAL -->
    <div class="modal-backdrop" id="addShoppingListModal" data-open="false" aria-hidden="true">
      <div class="modal" role="dialog" aria-labelledby="addShoppingListTitle" aria-modal="true">
        <h2 id="addShoppingListTitle">New Shopping List</h2>
        <form id="addShoppingListForm" class="form">
          <label>
            List name
            <input type="text" id="shoppingListNameInput" placeholder="e.g., Costco run" required />
          </label>
          <div class="modal-actions">
            <button type="button" class="btn" data-close-modal>Cancel</button>
            <button type="submit" class="btn primary" id="shoppingListSubmitBtn">Create</button>
          </div>
        </form>
      </div>
    </div>

    <!-- ADD SHOPPING ITEM MODAL -->
    <div class="modal-backdrop" id="addShoppingItemModal" data-open="false" aria-hidden="true">
      <div class="modal" role="dialog" aria-labelledby="addShoppingItemTitle" aria-modal="true">
        <h2 id="addShoppingItemTitle">Add Item</h2>
        <form id="addShoppingItemForm" class="form">
          <label>
            Item name
            <input type="text" id="shoppingItemNameInput" placeholder="e.g., Eggs (12)" required />
          </label>
          <div class="modal-actions">
            <button type="button" class="btn" data-close-modal>Cancel</button>
            <button type="submit" class="btn primary">Add</button>
          </div>
        </form>
      </div>
    </div>

    <!-- scripts and deferred loaders -->
    <script type="module" src="./src/utils/utilities.js"></script>
    <script type="module" src="./src/main.js"></script>
    <script type="module" src="./src/inventory.js"></script>
    <script type="module" src="./src/shopping-lists.js"></script>
    <script type="module" src="./src/settings.js"></script>
    <script type="module" src="./src/recipes.js"></script>
  </body>
</html>
